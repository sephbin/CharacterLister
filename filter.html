<html>
<head>
	<title></title>
	<style type="text/css">
	div.pool{
		position:absolute;
		width:300px;
		top:0px;
		bottom:0px;
		left:0px;
		background:#FFF;
		overflow-y:scroll;
	}
	div.page{
		position:absolute;
		top:0px;
		bottom:0px;
		left:300px;
		right:0px;
		margin-top:5px;
		margin-right:5px;
		background:#FFF;
		box-shadow: 0px 0px 10px #EEE;
		border-radius: 5px;
		padding:5px;
	}
	div.character{
		margin-top:5px;
		margin-left:5px;
		margin-right:15px;
		padding:5px;
		border-radius: 5px;
		box-shadow: 0px 0px 10px #EEE;
	}
	[highlight="0"]{
		background:#FFF;
		opacity:0.2;
	}
	[highlight="2"]{
		background:#000;
		color:FFF;
	}
	[type="ally"]{
		color: #689f38;
		background:#dcedc8;
	}
	[type="enemy"]{
		color: #f44336;
		background:#ffcdd2;
	}
	[type="boss"]{
		color: #9c27b0;
		background:#e1bee7;
	}
	[type="uboss"]{
		color: #673ab7;
		background:#d1c4e9;
	}
	[type="minion"]{
		color: #0097a7;
		background:#b2ebf2;
	}
	[type="rmin"]{
		color:  #009688;
		background:#b2dfdb;
	}
	[type="rboss"]{
		color: #e91e63;
		background:#f8bbd0;
	}
	a,h2,h3{
		font-family:Calibri;
	}
	a.selector{
		font-weight:Bold;
	}
	a.selSub{
		opacity:0.75;
	}
	h2,h3{
		margin-left:25px;
	}
	h3{
		font-weight:normal;
	}
	[status="dead"]{
		text-decoration: line-through;
	}
	</style>
	<link rel="stylesheet" href="perfect-scrollbar.min.css" />
	<script src="js/jquery-2.2.0.min.js"></script>
	<script src="js/perfect-scrollbar.jquery.min.js"></script>
</head>
<body>
<div class="pool">
</div>
<div class="page">
</div>
</body>
<script>
function getObjects(obj, key, val) {
    var objects = [];
    for (var i in obj) {
        if (!obj.hasOwnProperty(i)) continue;
        if (typeof obj[i] == 'object') {
            objects = objects.concat(getObjects(obj[i], key, val));
        } else if (i == key && obj[key] == val) {
            objects.push(obj);
        }
    }
    return objects;
}
</script>
<script>
characterList = [
{"name":"","race":"","occupation":"","status":"alive","id":"","connection":[]},
{"name":"Karly Redsun","race":"Human","occupation":"Scout","status":"alive","id":"kar","connection":[]},
{"name":"Snugubbe","race":"Asbj&oslash;rn, White","occupation":"Warrior","status":"alive","id":"snu","connection":[{"rid":"fen","type":"ally"},{"rid":"dar","type":"ally"},{"rid":"tyb","type":"ally"},{"rid":"dar","type":"ally"}]},
{"name":"Tybalt","race":"Human","occupation":"Librarian","status":"alive","id":"tyb","connection":[{"rid":"snu","type":"ally"},{"rid":"fen","type":"ally"},{"rid":"dar","type":"ally"},{"rid":"dar","type":"ally"}]},
{"name":"Arnes Porter","race":"Human","occupation":"","status":"alive","id":"arn","connection":[]},
{"name":"Vilberg the All-Wise","race":"Human","occupation":"","status":"dead","id":"vil","connection":[]},
{"name":"Dari the Honourable","race":"Dwarf, Svell","occupation":"","status":"alive","id":"dar","connection":[{"rid":"fen","type":"ally"},{"rid":"tyb","type":"ally"},{"rid":"snu","type":"ally"},{"rid":"steAet","type":"ally"}]},
{"name":"Fenton","race":"Dwarf, Chalk","occupation":"Godi of Laurel","status":"alive","id":"fen","connection":[{"rid":"snu","type":"ally"},{"rid":"tyb","type":"ally"},{"rid":"dar","type":"ally"}]},
{"name":"Elimar the Black", "race":"Human","occupation":"Bounty Hunter","status":"alive","id":"eliBla","connection":[{"rid":"refCod","type":"ally"},{"rid":"valWol","type":"boss"}]},
{"name":"Refur Cod-Biter","race":"Human","occupation":"Hirthman","status":"alive","id":"refCod","connection":[{"rid":"eliBla","type":"ally"},{"rid":"valWol","type":"boss"}]},
{"name":"Haddi the Old","race":"Human","occupation":"Godi of Gol","status":"alive","id":"hadOld","connection":[{"rid":"eamMcm","type":"ally"}]},
{"name":"Eamon Mcmillan","race":"Dwarf, Chalk","occupation":"Godi of Gol","status":"alive","id":"eamMcm","connection":[{"rid":"hadOld","type":"ally"}]},
{"name":"Sirus Karlpels","race":"Asbj&oslash;rn, Brown","occupation":"Sell Sword","status":"alive","id":"sirKar","connection":[{"rid":"astSol","type":"boss"},{"rid":"molKar","type":"ally"}]},
{"name":"Val&#254;&oacute;r Wolfjoint","race":"Human","occupation":"Jarl Warrior","status":"alive","id":"valWol","connection":[{"rid":"eliBla","type":"minion"},{"rid":"refCod","type":"minion"},{"rid":"berOxe","type":"enemy"},{"rid":"ostNjo","type":"uboss"}]},
{"name":"Bergj&oacute;n Oxen-Might","race":"Human","occupation":"Jarl Warrior","status":"alive","id":"berOxe","connection":[{"rid":"valWol","type":"enemy"},{"rid":"ostNjo","type":"uboss"}]},
{"name":"Herstein Bluetooth","race":"Human","occupation":"Jarl Warrior","status":"alive","id":"","connection":[{"rid":"ostNjo","type":"uboss"}]},
{"name":"Osten Njordsson the Freeman","race":"Dwarf, Svell","occupation":"King","status":"alive","id":"ostNjo","connection":[]},
{"name":"Vigar Aethorin","race":"Dwarf, Svell","occupation":"Head Shaman of Mannik","status":"alive","id":"vigAet","connection":[{"rid":"ostNjo","type":"uboss"},{"rid":"steAet","type":"rmin"},{"rid":"narLok","type":"enemy"}]},
{"name":"Odvin Kaldathrad","race":"Dwarf, Svell","occupation":"Head Shaman of Laurel","status":"alive","id":"odvKal","connection":[{"rid":"ostNjo","type":"uboss"}]},
{"name":"Brynvald Bjorinkal/Goldtooth","race":"Dwarf, Svell","occupation":"Head Shaman of Wuruhi","status":"alive","id":"bryBjo","connection":[{"rid":"ostNjo","type":"uboss"}]},
{"name":"Narvid Lokinal","race":"Dwarf, Svell","occupation":"Hallen Host","status":"alive","id":"narLok","connection":[{"rid":"ostNjo","type":"uboss"},{"rid":"vigAet","type":"enemy"},{"rid":"valWol","type":"ally"}]},
{"name":"Edlan Geasjorm","race":"Dwarf, Svell","occupation":"Goldsmith Master","status":"alive","id":"","connection":[{"rid":"ostNjo","type":"uboss"}]},
{"name":"Mr. Izzard","race":"Human","occupation":"Everyman","status":"alive","id":"mrIzz","connection":[{"rid":"orwCle","type":"uboss"},{"rid":"refCod","type":"ally"},{"rid":"valWol","type":"ally"}]},
{"name":"Orwel Clease","race":"Human","occupation":"Commander","status":"alive","id":"orwCle","connection":[{"rid":"mrIzz","type":"minion"}]},
{"name":"Stefan Truesteer Aethorin","race":"Dwarf, Svell","occupation":"Woodsman","status":"alive","id":"steAet","connection":[{"rid":"vigAet","type":"rboss"},{"rid":"dar","type":"ally"}]},
{"name":"Hj&aacute;lprekur Moon","race":"Human","occupation":"","status":"alive","id":"","connection":[]},
{"name":"Sturri the Squint-Eyed","race":"Human","occupation":"","status":"alive","id":"","connection":[]},
{"name":"Hrifla the dwarf","race":"Human","occupation":"","status":"alive","id":"","connection":[]},
{"name":"Moli Karlpels","race":"Asbj&oslash;rn, Brown","occupation":"Sell Sword","status":"alive","id":"molKar","connection":[{"rid":"astSol","type":"boss"},{"rid":"sirKar","type":"ally"}]},
{"name":"Astvar Solpels","race":"Asbj&oslash;rn, Black","occupation":"Zealot","status":"alive","id":"astSol","connection":[{"rid":"sirKar","type":"minion"},{"rid":"molKar","type":"minion"}]}];
$.each(characterList,function(i,object){
	object['index'] = i;
});

pC ="";
$('div.pool').perfectScrollbar();
$.each(characterList,function(i,object){
	pC += '<div id="'+i+'"class="character">';
	pC += '<a class="selector" status="'+object.status+'">'+object.name+'</a><br>';
	pC += '<a class="selSub">'+object.race+' - </a>';
	pC += '<a class="selSub">'+object.occupation+'</a><br>';
	pC += '</div>';
});
$('div.pool').html(pC);

$('div.character').on( "click", function(){
	index = $(this).attr('id');
	cArray = characterList[index].connection;
	//console.log(cArray);
	$('div.character').attr('highlight','0');
	$('div.character').attr('type','');
	$(this).attr('highlight','2');
	$.each(cArray,function(i,o){
		
		a = getObjects(characterList, 'id', o.rid);
		$.each(a,function(i2,o2){
			console.log(o.type);
			$('div#'+o2.index).attr('highlight','1');
			$('div#'+o2.index).attr('type',o.type);
		});
	});

	pageContent = "";
	pageContent += '<h2>'+characterList[index].name;+'</h2>'
	pageContent += '<h3 class="selSub">'+characterList[index].race+' - '+characterList[index].occupation+'</h3><br>';

	
	if(pageContent ==undefined){
		pageContent = "";
	}
	$('div.page').html(pageContent);
});
</script>
</html>